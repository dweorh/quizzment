import{d as P,a as f,r as x,w as V,o as l,c as i,b as n,u as b,n as j,t as r,e as y,v as h,f as M,R as U,g as k,h as G,i as C,j as Y,F as E,k as B,l as F,m as I,p as Z,q as T,A,s as H,x as z,y as J,z as S,B as K}from"./index.34b4cc32.js";const W={class:"question-block"},X={key:0,controls:"",class:"question-media"},ee=["src"],se=M(" Your browser does not support the video tag. "),te={class:"text-xl"},ne={key:0,class:"text-lg mt-1 mb-1 cursor-pointer"},oe=n("span",{class:"ml-2"},"Tak",-1),ae=n("span",{class:"ml-2"},"Nie",-1),le={key:1},ie={class:"ml-2"},re={class:"ml-2"},ue={class:"ml-2"},de={class:"text-right mt-4"},ce=P({__name:"SingleQuestion",props:{question:null},emits:["gotAnswer"],setup($){const o=$,v=U+"/media-for-web/",w=f(()=>o.question.a==="T"||o.question.a==="N"),d=f(()=>o.question.media.substring(o.question.media.length-3)==="wmv"),g=f(()=>v+o.question.media.substring(0,o.question.media.length-3)+"m4v"),u=f(()=>v+(o.question.media?o.question.media:"brak_zdjecia_1024x576.jpg")),t=x("");return V(o.question,(c,e)=>{(!e||c.id!=e.id)&&(t.value="")}),(c,e)=>(l(),i("section",W,[n("div",null,[b(d)?(l(),i("video",X,[n("source",{src:b(g),type:"video/mp4"},null,8,ee),se])):(l(),i("div",{key:1,style:j("background-image: url('"+b(u)+"')"),class:"question-media"},null,4))]),n("div",te,r(o.question.q_PL)+" ("+r(o.question.points)+"pkt.) ",1),b(w)?(l(),i("section",ne,[n("div",{onClick:e[1]||(e[1]=s=>t.value="T"),class:"mb-2 border-2 p-2 border-gray-100 hover:bg-zinc-200"},[y(n("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),value:"T"},null,512),[[h,t.value]]),oe]),n("div",{onClick:e[3]||(e[3]=s=>t.value="N"),class:"border-2 p-2 border-gray-100 hover:bg-zinc-200"},[y(n("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=s=>t.value=s),value:"N"},null,512),[[h,t.value]]),ae])])):(l(),i("section",le,[n("div",{onClick:e[5]||(e[5]=s=>t.value="A"),class:"mb-2 border-2 p-2 border-gray-100 hover:bg-zinc-200"},[y(n("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=s=>t.value=s),value:"A"},null,512),[[h,t.value]]),n("span",ie,r(o.question.a_A_PL),1)]),n("div",{onClick:e[7]||(e[7]=s=>t.value="B"),class:"mb-2 border-2 p-2 border-gray-100 hover:bg-zinc-200"},[y(n("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=s=>t.value=s),value:"B"},null,512),[[h,t.value]]),n("span",re,r(o.question.a_B_PL),1)]),n("div",{onClick:e[9]||(e[9]=s=>t.value="C"),class:"border-2 p-2 border-gray-100 hover:bg-zinc-200"},[y(n("input",{type:"radio","onUpdate:modelValue":e[8]||(e[8]=s=>t.value=s),value:"C"},null,512),[[h,t.value]]),n("span",ue,r(o.question.a_C_PL),1)])])),n("div",de,[n("span",{onClick:e[10]||(e[10]=s=>c.$emit("gotAnswer",t.value)),class:"p-2 border-2 border-gray-100 hover:bg-zinc-200 cursor-pointer"},"Dalej")])]))}}),pe={class:"question-block"},ve={key:0,controls:"",class:"question-media"},me=["src"],_e=M(" Your browser does not support the video tag. "),ge={class:"text-xl"},xe={key:0,class:"text-lg mt-1 mb-1 cursor-pointer"},be=n("span",{class:"ml-2"},"Tak",-1),we=n("span",{class:"ml-2"},"Nie",-1),ye={key:1},he={class:"ml-2"},qe={class:"ml-2"},ke={class:"ml-2"},fe=P({__name:"SingleAnswer",props:{answer:null},emits:["gotAnswer"],setup($){const o=$,v=U+"/media-for-web/",w=f(()=>o.answer.question.a==="T"||o.answer.question.a==="N"),d=f(()=>o.answer.question.media.substring(o.answer.question.media.length-3)==="wmv"),g=f(()=>v+o.answer.question.media.substring(0,o.answer.question.media.length-3)+"m4v"),u=f(()=>v+(o.answer.question.media?o.answer.question.media:"brak_zdjecia_1024x576.jpg")),t=x(o.answer.answer);return V(o.answer,c=>{t.value=c.answer}),(c,e)=>(l(),i("section",pe,[n("div",null,[b(d)?(l(),i("video",ve,[n("source",{src:b(g),type:"video/mp4"},null,8,me),_e])):(l(),i("div",{key:1,style:j("background-image: url('"+b(u)+"')"),class:"question-media"},null,4))]),n("div",ge,r(o.answer.question.q_PL)+" ("+r(o.answer.question.points)+"pkt.) ",1),b(w)?(l(),i("section",xe,[n("div",{readonly:"",class:k(["mb-2 border-2 p-2 border-gray-100",{"bg-green-400":o.answer.question.a==="T","bg-red-400":o.answer.question.a!==t.value&&t.value==="T"}])},[y(n("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),value:"T"},null,512),[[h,t.value]]),be],2),n("div",{readonly:"",class:k(["border-2 p-2 border-gray-100",{"bg-green-400":o.answer.question.a==="N","bg-red-400":o.answer.question.a!==t.value&&t.value==="N"}])},[y(n("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=s=>t.value=s),value:"N"},null,512),[[h,t.value]]),we],2)])):(l(),i("section",ye,[n("div",{class:k(["mb-2 border-2 p-2 border-gray-100",{"bg-green-400":o.answer.question.a==="A","bg-red-400":o.answer.question.a!==t.value&&t.value==="A"}])},[y(n("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=s=>t.value=s),value:"A"},null,512),[[h,t.value]]),n("span",he,r(o.answer.question.a_A_PL),1)],2),n("div",{class:k(["mb-2 border-2 p-2 border-gray-100",{"bg-green-400":o.answer.question.a==="B","bg-red-400":o.answer.question.a!==t.value&&t.value==="B"}])},[y(n("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=s=>t.value=s),value:"B"},null,512),[[h,t.value]]),n("span",qe,r(o.answer.question.a_B_PL),1)],2),n("div",{class:k(["border-2 p-2 border-gray-100",{"bg-green-400":o.answer.question.a==="C","bg-red-400":o.answer.question.a!==t.value&&t.value==="C"}])},[y(n("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=s=>t.value=s),value:"C"},null,512),[[h,t.value]]),n("span",ke,r(o.answer.question.a_C_PL),1)],2)]))]))}}),$e={class:"w-full"},Ce={key:0,class:"border-2 border-green-200 mx-1 p-2 text-center text-lg"},Ne={key:1,class:"border-2 border-red-200 mx-1 p-2 text-center text-lg"},Le=n("div",{class:"mx-1 p-2 text-lg"},"Link do wynik\xF3w Twojego egzaminu",-1),Te={class:"mx-1 p-2 text-lg"},Ae=n("div",{class:"mx-1 p-2 text-lg"},"Pytania i odpowiedzi:",-1),ze={class:"mx-1"},Se={class:"mb-1"},Ue=n("input",{type:"radio",checked:""},null,-1),Pe={class:"ml-2"},Ve=P({__name:"ExamSummary",props:{answers:null,t_start:null,t_end:null,result_id:null},emits:["passedExam"],setup($,{emit:o}){const v=$,w=68,d=x(0),g=x(0);G(()=>{v.answers.forEach(e=>{e.question.a===e.answer&&(d.value+=parseInt(e.question.points))}),g.value=Math.round((v.t_end-v.t_start)/1e3)}),V(d,()=>{o("passedExam",d.value>=w)});const u=e=>{if(navigator.clipboard)navigator.clipboard.writeText(e).then(function(){console.log("[copied]")}).catch(function(s){console.log("[error copy]",s)});else{const s=document.createElement("textarea");document.body.appendChild(s),s.value=e,s.select(),s.setSelectionRange(0,99999),document.execCommand("copy"),s.remove()}},t=e=>{const s=Math.floor(e/60/60),m=Math.floor((e-s*60*60)/60),N=e-s*60*60-m*60;let q="";return s&&(q+=s.toLocaleString("pl-PL",{minimumIntegerDigits:2,useGrouping:!1})+":"),q+=m.toLocaleString("pl-PL",{minimumIntegerDigits:2,useGrouping:!1})+":",q+=N.toLocaleString("pl-PL",{minimumIntegerDigits:2,useGrouping:!1}),q},c=e=>["N","T"].includes(e.question.a)?{N:"Nie",T:"Tak","":"Brak odpowiedzi"}[e.answer]:e.question["a_"+e.answer+"_PL"];return(e,s)=>(l(),i("div",$e,[d.value>=w?(l(),i("div",Ce,"ZDANY "+r(d.value)+" / 74",1)):C("",!0),d.value<w?(l(),i("div",Ne,"NIEZDANY "+r(d.value)+" / 74, min. "+r(w),1)):C("",!0),Le,n("div",{class:"mx-1 p-2 text-md",title:"Kliknij aby skopiowa\u0107 do schowka",onClick:s[0]||(s[0]=Y(m=>u(b(U)+"/result/"+v.result_id),["prevent"]))},r(b(U))+"/result/"+r(v.result_id),1),n("div",Te,"Czas egzaminu: "+r(t(g.value))+" / max ok 25 min",1),Ae,n("div",ze,[(l(!0),i(E,null,B(v.answers,(m,N)=>(l(),i("div",{key:m.question.id,class:"mb-3"},[n("div",Se,r(N+1)+". "+r(m.question.q_PL),1),n("div",{class:k(["mb-2 border-2 p-2 border-gray-100",{"bg-green-400":m.question.a===m.answer,"bg-red-400":m.question.a!==m.answer}])},[Ue,n("span",Pe,r(c(m)),1)],2)]))),128))])]))}});const De={class:"flex flex-col items-center w-full"},Ee=M("Zako\u0144cz"),Be={key:0,class:"flex flex-col items-center"},Me={class:"flex mb-1 flex-wrap pl-1 lg:pl-0 w-full"},Re={key:1,class:"flex flex-col items-center w-full"},Oe={class:"flex cursor-pointer mb-1 flex-wrap pl-1 lg:pl-0 mx-1"},Ie=["onClick"],Ge=P({__name:"ExamView",props:{result_id:null},setup($,{expose:o}){const v=$,w=()=>{let p=Date.now();const _=[8,9,"a","b"];return"xxxxxxxx-xxxx-4xxx-Nxxx-xxxxxxxxxxxx".replace(/[xN]/g,a=>{if(a==="N"){const O=Math.round(Math.random()*10%3);return _[O].toString(16)}else return p=p/(1+Math.random()),(p%16|0).toString(16)})},d=F(),g=I([]),u=I([]),t=x(0),c=x(0),e=x(!1),s=x(!1),m=x(!0),N=x(Math.random()),q=x(0),L=x(0),D=w(),Q=(p,_,a)=>{u.push({question:p,index:_,answer:a}),t.value+1<g.length?t.value++:(e.value=!0,s.value=!0,N.value=Math.random(),L.value=Date.now())},R=p=>{p=="summary"?(c.value=0,s.value=!0):(c.value=p,s.value=!1)};return V(e,()=>{T.post(A+"?action=store_result",{result_id:D,session_id:d.id,result:JSON.stringify({t_start:q.value,t_end:L.value,answers:{...u}})})}),G(()=>{Z(d),v.result_id?T.get(A+"?action=get_result&result_id="+v.result_id).then(p=>{if(!p.data||!p.data.result)H.push("/");else{const _=JSON.parse(p.data.result.result);Object.keys(_.answers).forEach(a=>u.push(_.answers[a])),s.value=!0,e.value=!0,q.value=_.t_start,L.value=_.t_end}}):(T.post(A+"?action=update_session",{session_id:d.id,category:d.category,type:"exam"}),T.get(A+"?action=exam&category="+d.category).then(p=>{p&&p.data&&g.push(...p.data.questions)}).then(()=>{q.value=Date.now()}))}),o({questions:g,exam_result_id:D}),(p,_)=>(l(),i("div",De,[(l(),z(S(b(K)),{to:"/lesson",class:"self-start pl-2 m-2"},{default:J(()=>[Ee]),_:1})),e.value?C("",!0):(l(),i("div",Be,[n("div",Me,[(l(!0),i(E,null,B(g.length,a=>(l(),i("div",{key:a,class:k(["pr-1 pl-1 mr-1 border-2 border-gray-100",{"bg-zinc-400":a<=t.value,"bg-zinc-200":a-1===t.value}])},r(a),3))),128))]),g.length>0?(l(),z(S(ce),{question:g[t.value],onGotAnswer:_[0]||(_[0]=a=>Q(g[t.value],t.value,a)),key:t.value},null,40,["question"])):C("",!0)])),e.value?(l(),i("div",Re,[n("div",Oe,[(l(!0),i(E,null,B(u.length,a=>(l(),i("div",{key:a,class:k(["pr-1 pl-1 mr-1 border-2",{"bg-green-400":u[a-1].question.a===u[a-1].answer&&(c.value!==a-1||s.value),"bg-red-400":u[a-1].question.a!==u[a-1].answer&&(c.value!==a-1||s.value),"text-green-400 border-green-400 bg-white":u[a-1].question.a===u[a-1].answer&&c.value===a-1&&!s.value,"text-red-400 border-red-400 bg-white":u[a-1].question.a!==u[a-1].answer&&c.value===a-1&&!s.value}]),onClick:O=>R(a-1)},r(a),11,Ie))),128)),n("div",{class:k(["pr-1 pl-1 border-2",{"bg-red-400":!m.value,"bg-green-400":m.value}]),onClick:_[1]||(_[1]=a=>R("summary"))}," Wynik ",2)]),s.value?C("",!0):(l(),z(S(fe),{answer:u[c.value],key:c.value},null,8,["answer"])),s.value?(l(),z(S(Ve),{answers:u,t_start:q.value,t_end:L.value,key:N.value,result_id:b(D),onPassedExam:_[2]||(_[2]=a=>m.value=a)},null,40,["answers","t_start","t_end","result_id"])):C("",!0)])):C("",!0)]))}});export{Ge as default};
