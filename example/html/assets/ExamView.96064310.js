import{d as T,a as h,r as g,w as U,o as l,c as u,b as t,u as s,n as E,t as m,e as w,v as q,f as P,R,g as x,h as I,i as k,F as N,j as z,k as D,l as M,m as O,p as S,A as B,q as C,s as j,x as A,y as G,z as Q}from"./index.278a04ed.js";const Y={class:"question-block"},Z={key:0,controls:"",class:"question-media"},F=["src"],H=P(" Your browser does not support the video tag. "),W={class:"text-xl"},J={key:0,class:"text-lg mt-1 mb-1 cursor-pointer"},K=t("span",{class:"ml-2"},"Tak",-1),X=t("span",{class:"ml-2"},"Nie",-1),ee={key:1},se={class:"ml-2"},te={class:"ml-2"},ne={class:"ml-2"},oe={class:"text-right mt-4"},ae=T({__name:"SingleQuestion",props:{question:null},emits:["gotAnswer"],setup(f){const o=f,c=R+"/media-for-web/",d=h(()=>o.question.a==="T"||o.question.a==="N"),p=h(()=>o.question.media.substring(o.question.media.length-3)==="wmv"),v=h(()=>c+o.question.media.substring(0,o.question.media.length-3)+"m4v"),y=h(()=>c+(o.question.media?o.question.media:"brak_zdjecia_1024x576.jpg")),e=g("");return U(o.question,(r,n)=>{(!n||r.id!=n.id)&&(e.value="")}),(r,n)=>(l(),u("section",Y,[t("div",null,[s(p)?(l(),u("video",Z,[t("source",{src:s(v),type:"video/mp4"},null,8,F),H])):(l(),u("div",{key:1,style:E("background-image: url('"+s(y)+"')"),class:"question-media"},null,4))]),t("div",W,m(o.question.q_PL)+" ("+m(o.question.points)+"pkt.) ",1),s(d)?(l(),u("section",J,[t("div",{onClick:n[1]||(n[1]=a=>e.value="T"),class:"mb-2 border-2 p-2 border-gray-100 hover:bg-zinc-200"},[w(t("input",{type:"radio","onUpdate:modelValue":n[0]||(n[0]=a=>e.value=a),value:"T"},null,512),[[q,e.value]]),K]),t("div",{onClick:n[3]||(n[3]=a=>e.value="N"),class:"border-2 p-2 border-gray-100 hover:bg-zinc-200"},[w(t("input",{type:"radio","onUpdate:modelValue":n[2]||(n[2]=a=>e.value=a),value:"N"},null,512),[[q,e.value]]),X])])):(l(),u("section",ee,[t("div",{onClick:n[5]||(n[5]=a=>e.value="A"),class:"mb-2 border-2 p-2 border-gray-100 hover:bg-zinc-200"},[w(t("input",{type:"radio","onUpdate:modelValue":n[4]||(n[4]=a=>e.value=a),value:"A"},null,512),[[q,e.value]]),t("span",se,m(o.question.a_A_PL),1)]),t("div",{onClick:n[7]||(n[7]=a=>e.value="B"),class:"mb-2 border-2 p-2 border-gray-100 hover:bg-zinc-200"},[w(t("input",{type:"radio","onUpdate:modelValue":n[6]||(n[6]=a=>e.value=a),value:"B"},null,512),[[q,e.value]]),t("span",te,m(o.question.a_B_PL),1)]),t("div",{onClick:n[9]||(n[9]=a=>e.value="C"),class:"border-2 p-2 border-gray-100 hover:bg-zinc-200"},[w(t("input",{type:"radio","onUpdate:modelValue":n[8]||(n[8]=a=>e.value=a),value:"C"},null,512),[[q,e.value]]),t("span",ne,m(o.question.a_C_PL),1)])])),t("div",oe,[t("span",{onClick:n[10]||(n[10]=a=>r.$emit("gotAnswer",e.value)),class:"p-2 border-2 border-gray-100 hover:bg-zinc-200 cursor-pointer"},"Dalej")])]))}}),ie={class:"question-block"},re={key:0,controls:"",class:"question-media"},le=["src"],ue=P(" Your browser does not support the video tag. "),de={class:"text-xl"},pe={key:0,class:"text-lg mt-1 mb-1 cursor-pointer"},me=t("span",{class:"ml-2"},"Tak",-1),ce=t("span",{class:"ml-2"},"Nie",-1),ve={key:1},_e={class:"ml-2"},ge={class:"ml-2"},be={class:"ml-2"},we=T({__name:"SingleAnswer",props:{answer:null},emits:["gotAnswer"],setup(f){const o=f,c=R+"/media-for-web/",d=h(()=>o.answer.question.a==="T"||o.answer.question.a==="N"),p=h(()=>o.answer.question.media.substring(o.answer.question.media.length-3)==="wmv"),v=h(()=>c+o.answer.question.media.substring(0,o.answer.question.media.length-3)+"m4v"),y=h(()=>c+(o.answer.question.media?o.answer.question.media:"brak_zdjecia_1024x576.jpg")),e=g(o.answer.answer);return U(o.answer,r=>{e.value=r.answer}),(r,n)=>(l(),u("section",ie,[t("div",null,[s(p)?(l(),u("video",re,[t("source",{src:s(v),type:"video/mp4"},null,8,le),ue])):(l(),u("div",{key:1,style:E("background-image: url('"+s(y)+"')"),class:"question-media"},null,4))]),t("div",de,m(o.answer.question.q_PL)+" ("+m(o.answer.question.points)+"pkt.) ",1),s(d)?(l(),u("section",pe,[t("div",{readonly:"",class:x(["mb-2 border-2 p-2 border-gray-100",{"bg-green-400":o.answer.question.a==="T","bg-red-400":o.answer.question.a!==e.value&&e.value==="T"}])},[w(t("input",{type:"radio","onUpdate:modelValue":n[0]||(n[0]=a=>e.value=a),value:"T"},null,512),[[q,e.value]]),me],2),t("div",{readonly:"",class:x(["border-2 p-2 border-gray-100",{"bg-green-400":o.answer.question.a==="N","bg-red-400":o.answer.question.a!==e.value&&e.value==="N"}])},[w(t("input",{type:"radio","onUpdate:modelValue":n[1]||(n[1]=a=>e.value=a),value:"N"},null,512),[[q,e.value]]),ce],2)])):(l(),u("section",ve,[t("div",{class:x(["mb-2 border-2 p-2 border-gray-100",{"bg-green-400":o.answer.question.a==="A","bg-red-400":o.answer.question.a!==e.value&&e.value==="A"}])},[w(t("input",{type:"radio","onUpdate:modelValue":n[2]||(n[2]=a=>e.value=a),value:"A"},null,512),[[q,e.value]]),t("span",_e,m(o.answer.question.a_A_PL),1)],2),t("div",{class:x(["mb-2 border-2 p-2 border-gray-100",{"bg-green-400":o.answer.question.a==="B","bg-red-400":o.answer.question.a!==e.value&&e.value==="B"}])},[w(t("input",{type:"radio","onUpdate:modelValue":n[3]||(n[3]=a=>e.value=a),value:"B"},null,512),[[q,e.value]]),t("span",ge,m(o.answer.question.a_B_PL),1)],2),t("div",{class:x(["border-2 p-2 border-gray-100",{"bg-green-400":o.answer.question.a==="C","bg-red-400":o.answer.question.a!==e.value&&e.value==="C"}])},[w(t("input",{type:"radio","onUpdate:modelValue":n[4]||(n[4]=a=>e.value=a),value:"C"},null,512),[[q,e.value]]),t("span",be,m(o.answer.question.a_C_PL),1)],2)]))]))}}),qe={class:"w-full"},ye={key:0,class:"border-2 border-green-200 mx-1 p-2 text-center text-lg"},xe={key:1,class:"border-2 border-red-200 mx-1 p-2 text-center text-lg"},he={class:"mx-1 p-2 text-lg"},ke=t("div",{class:"mx-1 p-2 text-lg"},"Pytania i odpowiedzi:",-1),fe={class:"mx-1"},$e={class:"mb-1"},Le=t("input",{type:"radio",checked:""},null,-1),Ce={class:"ml-2"},Ae=T({__name:"ExamSummary",props:{answers:null,t_start:null,t_end:null},emits:["passedExam"],setup(f,{emit:o}){const c=f,d=68,p=g(0),v=g(0);I(()=>{c.answers.forEach(r=>{r.question.a===r.answer&&(p.value+=parseInt(r.question.points))}),v.value=Math.round((c.t_end-c.t_start)/1e3)}),U(p,()=>{o("passedExam",p.value>=d)});const y=r=>{const n=Math.floor(r/60/60),a=Math.floor((r-n*60*60)/60),$=r-n*60*60-a*60;let L="";return n&&(L+=n.toLocaleString("pl-PL",{minimumIntegerDigits:2,useGrouping:!1})+":"),L+=a.toLocaleString("pl-PL",{minimumIntegerDigits:2,useGrouping:!1})+":",L+=$.toLocaleString("pl-PL",{minimumIntegerDigits:2,useGrouping:!1}),L},e=r=>["N","T"].includes(r.question.a)?{N:"Nie",T:"Tak","":"Brak odpowiedzi"}[r.answer]:r.question["a_"+r.answer+"_PL"];return(r,n)=>(l(),u("div",qe,[p.value>=d?(l(),u("div",ye,"ZDANY "+m(p.value)+" / 74",1)):k("",!0),p.value<d?(l(),u("div",xe,"NIEZDANY "+m(p.value)+" / 74, min. "+m(d),1)):k("",!0),t("div",he,"Czas egzaminu: "+m(y(v.value))+" / max ok 25 min",1),ke,t("div",fe,[(l(!0),u(N,null,z(c.answers,(a,$)=>(l(),u("div",{key:a.question.id,class:"mb-3"},[t("div",$e,m($+1)+". "+m(a.question.q_PL),1),t("div",{class:x(["mb-2 border-2 p-2 border-gray-100",{"bg-green-400":a.question.a===a.answer,"bg-red-400":a.question.a!==a.answer}])},[Le,t("span",Ce,m(e(a)),1)],2)]))),128))])]))}});const Ne={class:"flex flex-col items-center w-full"},ze=P("Zako\u0144cz"),Te={key:0,class:"flex flex-col items-center"},Ue={class:"flex mb-1 flex-wrap pl-1 lg:pl-0 w-full"},Pe={key:1,class:"flex flex-col items-center w-full"},Ve={class:"flex cursor-pointer mb-1 flex-wrap pl-1 lg:pl-0 mx-1"},De=["onClick"],Ee={__name:"ExamView",setup(f,{expose:o}){let c=D([]),d=D([]),p=g(0),v=g(0),y=g(!1),e=g(!1),r=g(!0),n=g(Math.random()),a=g(0),$=g(0);const L=(b,_,i)=>{d.push({question:b,index:_,answer:i}),p.value+1<c.length?p.value++:(y.value=!0,e.value=!0,n.value=Math.random(),$.value=Date.now())},V=b=>{b=="summary"?(v.value=0,e.value=!0):(v.value=b,e.value=!1)};return I(()=>{const b=M();O(b),S.post(B+"?action=update_session",{session_id:b.id,category:b.category,type:"exam"}),S.get(B+"?action=exam&category="+b.category).then(_=>{_&&_.data&&c.push(..._.data.questions)}).then(()=>{a.value=Date.now()})}),o({questions:c}),(b,_)=>(l(),u("div",Ne,[(l(),C(A(s(G)),{to:"/lesson",class:"self-start pl-2 m-2"},{default:j(()=>[ze]),_:1})),s(y)?k("",!0):(l(),u("div",Te,[t("div",Ue,[(l(!0),u(N,null,z(s(c).length,i=>(l(),u("div",{key:i,class:x(["pr-1 pl-1 mr-1 border-2 border-gray-100",{"bg-zinc-400":i<=s(p),"bg-zinc-200":i-1===s(p)}])},m(i),3))),128))]),s(c).length>0?(l(),C(A(ae),{question:s(c)[s(p)],onGotAnswer:_[0]||(_[0]=i=>L(s(c)[s(p)],s(p),i)),key:s(p)},null,40,["question"])):k("",!0)])),s(y)?(l(),u("div",Pe,[t("div",Ve,[(l(!0),u(N,null,z(s(d).length,i=>(l(),u("div",{key:i,class:x(["pr-1 pl-1 mr-1 border-2",{"bg-green-400":s(d)[i-1].question.a===s(d)[i-1].answer&&(s(v)!==i-1||s(e)),"bg-red-400":s(d)[i-1].question.a!==s(d)[i-1].answer&&(s(v)!==i-1||s(e)),"text-green-400 border-green-400 bg-white":s(d)[i-1].question.a===s(d)[i-1].answer&&s(v)===i-1&&!s(e),"text-red-400 border-red-400 bg-white":s(d)[i-1].question.a!==s(d)[i-1].answer&&s(v)===i-1&&!s(e)}]),onClick:Se=>V(i-1)},m(i),11,De))),128)),t("div",{class:x(["pr-1 pl-1 border-2",{"bg-red-400":!s(r),"bg-green-400":s(r)}]),onClick:_[1]||(_[1]=i=>V("summary"))}," Wynik ",2)]),s(e)?k("",!0):(l(),C(A(we),{answer:s(d)[s(v)],key:s(v)},null,8,["answer"])),s(e)?(l(),C(A(Ae),{answers:s(d),t_start:s(a),t_end:s($),key:s(n),onPassedExam:_[2]||(_[2]=i=>Q(r)?r.value=i:r=i)},null,40,["answers","t_start","t_end"])):k("",!0)])):k("",!0)]))}};export{Ee as default};
